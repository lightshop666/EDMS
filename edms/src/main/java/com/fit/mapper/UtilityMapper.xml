<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.fit.mapper.UtilityMapper">

	<!-- 공용픔 상세보기 -->
	<select id="selectUtilityOne" parameterType="com.fit.vo.Utility"
		resultType="com.fit.vo.Utility">
		SELECT
			utility_no utilityNo
			, utility_category utilityCategory
			, utility_name utilityName
			, utility_info utilityInfo
			, createdate
			, updatedate		
		FROM utility
		WHERE utility_no = #{utilityNo}	 
	</select>
	
	<!-- 리스트를 보여줄 경우 페이징 쿼리, 마이바티스는 매개변수를 1개 받을 수 있으므로 
	Map 타입으로 currentPage, RowPerPage 넘겨줄 예정 -->
	<select id="selectUtilityListByPage" parameterType="java.util.Map"
		resultType="com.fit.vo.Utility">
		SELECT
			utility_no utilityNo
			, utility_category utilityCategory
			, utility_name utilityName
			, utility_info utilityInfo
			, createdate
			, updatedate		
		FROM utility
		<where>
			<if test="utilityCategory == '차량'">
				AND utility_category = '차량'
			</if>
			<if test="utilityCategory == '회의실'">
				AND utility_category = '회의실'
			</if>
			<if test="utilityCategory == ''">
				AND '1' = '1'
			</if>
		</where>
		ORDER BY createdate DESC
		LIMIT #{beginRow}, #{rowPerPage}
	</select>
	
	<!-- 조건에 따른 전체 행의 개수를 확인하기 위한 메서드 -->
	<select id="selectUtilityCount" resultType="int">
		SELECT 
			COUNT(*) CNT 
		FROM utility
		<where>
			<if test="utilityCategory == '차량'">
				AND utility_category = '차량'
			</if>
			<if test="utilityCategory == '회의실'">
				AND utility_category = '회의실'
			</if>
			<if test="utilityCategory == ''">
				AND '1' = '1'
			</if>
		</where>	
	</select>
</mapper>