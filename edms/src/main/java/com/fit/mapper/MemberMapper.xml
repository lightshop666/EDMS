<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.fit.mapper.MemberMapper">
	<!-- 인사정보 등록여부 검사 -->
	<select id="empInfoCnt" parameterType="int" resultType="int">
		SELECT
			COUNT(*)
		FROM
			emp_info
		WHERE
			emp_no = #{empNo}
	</select>
	
	<!-- 사원번호 중복검사 -->
	<select id="memberInfoCnt" parameterType="int" resultType="int">
		SELECT
			COUNT(*)
		FROM
			member_info
		WHERE
			emp_no = #{empNo}
	</select>
	
	<!-- 회원가입 -->
	<insert id="addMember" parameterType="com.fit.vo.MemberInfo">
		INSERT INTO member_info(
			emp_no,
			pw,
			gender,
			email,
			address,
			createdate,
			updatedate
		) VALUES (
			#{empNo},
			PASSWORD( #{pw} ),
			#{gender},
			#{email},
			#{address},
			NOW(),
			NOW()
		)
	</insert>
	
	<!-- 개인정보 조회 -->
	<select id="selectMemberInfo" parameterType="int" resultType="com.fit.vo.MemberInfo">
		SELECT
			emp_no empNo,
			gender,
			email,
			address,
			createdate,
			updatedate
		FROM
			member_info
		WHERE
			emp_no = ${empNo}
	</select>
	
	<!-- 개인정보 파일 조회 -->
	<select id="selectMemberFile" parameterType="java.util.Map" resultType="com.fit.vo.MemberFile">
		SELECT
			member_file_no memberFileNo,
			emp_no empNo,
			file_category fileCategory,
			member_ori_file_name memberOriFileName,
			member_save_file_name memberSaveFileName,
			member_filetype memberFiletype,
			member_path memberPath,
			createdate,
			updatedate
		FROM
			member_file
		WHERE
			emp_no = #{empNo}
		AND
			file_category = #{fileCategory}
	</select>
</mapper>